{% extends "layout.html" %}
{% import "_components.html" as ui %}
{% block title %}Lançar Notas — Grupo #{{ group.id }} · TGI{% endblock %}

{% block content %}
<div class="mb-4 flex items-center justify-between">
  <div>
    <h1 class="text-xl font-semibold text-slate-800">Lançar/Editar Notas · Grupo {{ group.id }}</h1>
    <p class="text-slate-600">{{ group.title or 'Sem título' }}</p>
    <p class="text-sm text-slate-500">
      Relatórios: 0,5 cada (checkbox) &middot; Paper: 0 a 4.
    </p>
  </div>
  <div class="flex gap-2">
    {{ ui.btn("Meus grupos", href=url_for('professors.groups_list'), variant='secondary', icon='fa-solid fa-users') }}
    {{ ui.btn("Ver grupo", href=url_for('professors.group_detail', group_id=group.id), variant='secondary', icon='fa-regular fa-folder-open') }}
  </div>
</div>

<form method="post" novalidate class="rounded-xl border border-slate-200 bg-white p-5 shadow-sm space-y-4">
  {{ form.hidden_tag() }}

  <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
    <label class="flex items-center gap-2 rounded-lg border border-slate-200 bg-white p-3">
      {{ form.relatorio_i(class_="h-5 w-5") }}
      <span>Relatório I (0,5)</span>
    </label>

    <label class="flex items-center gap-2 rounded-lg border border-slate-200 bg-white p-3">
      {{ form.relatorio_ii(class_="h-5 w-5") }}
      <span>Relatório II (0,5)</span>
    </label>

    <div class="gap-2 rounded-lg border border-slate-200 bg-white p-3">
      <label class="block text-sm font-medium text-slate-700 mb-1">
        {{ form.paper.label }}
      </label>
      {{ form.paper(step="0.01", min="0", max="4",
                    class_="w-full border-slate-300 focus:border-slate-400 focus:ring focus:ring-slate-200") }}
      <p class="mt-1 text-xs text-slate-500">Informe um valor entre 0 e 4.</p>
      {% for e in form.paper.errors %}<div class="text-rose-600 text-sm">{{ e }}</div>{% endfor %}
    </div>
  </div>

  <div class="mt-4 flex items-center gap-2">
    {{ ui.submit("Salvar notas", icon="fa-solid fa-floppy-disk") }}
    {{ ui.btn("Cancelar", href=url_for('professors.group_detail', group_id=group.id), variant='secondary', icon='fa-solid fa-xmark') }}
  </div>
</form>
<div class="mt-6 text-sm text-slate-700">
  <strong>Membros:</strong>
  {% for s in members %} {{ s.name }} ({{ s.rgm }}){% if not loop.last %}, {% endif %}{% endfor %}
</div>
{% endblock %}
